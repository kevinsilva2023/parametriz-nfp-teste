<section class="identidade">
  <app-fundo-animado></app-fundo-animado>

  <div class="card-form animation-right overflow-hidden">
    <div class="d-flex flex-column justify-content-center gap-4 p-5">
      <h1 class="fs-1 text-primary fw-bolder text-center">Registrar</h1>

      <alert type="danger" [dismissible]="true" class="text-center anima-alert" *ngIf="errors.length > 0">
        <span class="fw-bolder fs-6">Oops...alguma coisa não deu certo:</span> <br>
        <ul>
          <li class="fs-small mt-1" *ngFor="let error of errors">
            {{error}}
          </li>
        </ul>
      </alert>

      <form class="d-flex flex-column " (ngSubmit)="efetuarRegistro()" [formGroup]="registerForm">

        <mat-form-field class="mb-2" appearance="outline" [ngClass]="{'has-error': displayMessage['razaoSocial']}">
          <mat-label>
            <i class="fa-solid fa-building"></i>
            &nbsp; Razão Social
          </mat-label>
          <input matInput formControlName="razaoSocial" type="text" placeholder="Razão Social da Instituição">
          <mat-error *ngIf="displayMessage['razaoSocial']" [innerHtml]="displayMessage['razaoSocial']"> </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100 mb-2" [ngClass]="{'has-error': displayMessage['cnpj']}">
          <mat-label>
            <i class="fa-solid fa-id-card"></i>
            &nbsp; CNPJ
          </mat-label>
          <input matInput formControlName="cnpj" type="text" placeholder="00.000.000/0000-00">
          <mat-error *ngIf="displayMessage['cnpj']" [innerHtml]="displayMessage['cnpj']"> </mat-error>
        </mat-form-field>

        <div class="row">
          <div class="col-6">
            <mat-form-field appearance="outline" class="w-100 mb-2" [ngClass]="{'has-error': displayMessage['email']}">
              <mat-label>
                <i class="fa-solid fa-envelope"></i>
                &nbsp; E-mail
              </mat-label>
              <input matInput formControlName="email" type="email" placeholder="seuemail@aqui.com.br">
              <mat-error *ngIf="displayMessage['email']" [innerHtml]="displayMessage['email']"> </mat-error>
            </mat-form-field>
          </div>
          <div class="col-6">
            <mat-form-field appearance="outline" class="w-100 mb-2"
              [ngClass]="{'has-error': displayMessage['usuario']}">
              <mat-label>
                <i class="fa-solid fa-user"></i>
                &nbsp; Usuário
              </mat-label>
              <input matInput formControlName="voluntarioNome" type="text" placeholder="Nome de Usuário">
              <mat-error *ngIf="displayMessage['voluntarioNome']" [innerHtml]="displayMessage['voluntarioNome']">
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="row">
          <div class="col-6">
            <mat-form-field appearance="outline" class="w-100 mb-2" [ngClass]="{'has-error': displayMessage['senha']}">
              <mat-label>
                <i class="fa-solid fa-lock"></i>
                &nbsp; Senha
              </mat-label>
              <input matInput formControlName="senha" [type]="verSenha ? 'text' : 'password'"
                placeholder="Digite sua Senha">
              <button mat-icon-button matSuffix type="button" class="btn" (click)="verSenha = !verSenha">
                <i class="fa-solid" [ngClass]="verSenha ? 'fa-eye-slash' : 'fa-eye'"></i>
              </button>
              <mat-error *ngIf="displayMessage['senha']" [innerHtml]="displayMessage['senha']"> </mat-error>
            </mat-form-field>
          </div>
          <div class="col-6">
            <mat-form-field appearance="outline" class="w-100 mb-2"
              [ngClass]="{'has-error': displayMessage['senhaConfirmacao']}">
              <mat-label>
                <i class="fa-solid fa-lock"></i>
                &nbsp; Confirma Senha
              </mat-label>
              <input matInput formControlName="senhaConfirmacao" [type]="verSenhaConfirmacao ? 'text' : 'password'"
                placeholder="Confirme sua Senha">
              <button mat-icon-button matSuffix type="button" class="btn"
                (click)="verSenhaConfirmacao = !verSenhaConfirmacao">
                <i class="fa-solid" [ngClass]="verSenhaConfirmacao ? 'fa-eye-slash' : 'fa-eye'"></i>
              </button>
              <mat-error *ngIf="displayMessage['senhaConfirmacao']" [innerHtml]="displayMessage['senhaConfirmacao']">
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <ul class="lista-requisitos mt-2 mb-0">
          <li [ngClass]="{'valido': requisitosSenha.minuscula}">Uma letra minúscula;</li>
          <li [ngClass]="{'valido': requisitosSenha.maiuscula}">Uma letra maiúscula;</li>
          <li [ngClass]="{'valido': requisitosSenha.numero}">Um número;</li>
          <li [ngClass]="{'valido': requisitosSenha.caracterEspecial}">Um caractere especial (ex: &#64;, !, .);</li>
          <li [ngClass]="{'valido': requisitosSenha.minimo}">Mínimo 6 caracteres;</li>
        </ul>

        <button type="submit" class="btn btn-primary rounded-5 p-3 mb-2 mt-4">
          Registrar
        </button>
        <p class="text-primary text-center fs-small">Sua Instituição já está cadastrada?
          <span routerLink="/login" class="fw-bolder pointer">Faça Login</span>
        </p>
      </form>
    </div>
  </div>
</section>